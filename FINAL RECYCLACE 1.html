
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recycl'ace - Fresque de la Balle</title>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Arial', sans-serif;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      background: #e2faf3;
      color: rgb(250,248,232);
      overflow: auto;
      position: relative;
    }

    .splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: #e2faf3;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      animation: fadeOut 0.5s ease-in-out forwards;
      animation-delay: 0.5s;
    }

    .splash-screen img {
      width: 150px;
      height: 150px;
      margin-bottom: 20px;
      animation: cinematicZoom 0.5s ease-in-out;
    }

    .splash-screen h1 {
      font-size: 2.5em;
      color: #1a2763;
      margin-bottom: 10px;
      animation: fadeIn 0.5s ease-in-out;
    }

    .splash-screen p {
      font-size: 1.2em;
      color: #1a2763;
      animation: fadeIn 0.5s ease-in-out;
      animation-delay: 0.25s;
    }

    @keyframes cinematicZoom {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }

    @keyframes fadeIn {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeOut {
      0% { opacity: 1; }
      100% { opacity: 0; display: none; }
    }

    .container {
      text-align: center;
      max-width: 500px;
      padding: 30px;
      background: rgb(250,248,232);
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      animation: fadeIn 1s ease-in-out;
      display: none;
      color: #333;
    }

    /* Special container sizing for Level 2 */
    .container.level-2-active {
      max-width: 1400px;
    }

    h1 {
      font-size: 2.5em;
      margin-bottom: 20px;
      animation: titlePulse 2s infinite;
      color: #1a2763;
    }

    @keyframes titlePulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    footer {
      position: fixed;
      bottom: 10px;
      right: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    footer img {
      width: 40px;
      height: 40px;
    }

    footer p {
      font-size: 1em;
      color: #1a2763;
    }

    .welcome-section, .quiz-section, .result-section, .intro-section, .game-section, .win-section, .level-transition-section, .certificate-section {
      display: none;
    }

    .welcome-section.active, .quiz-section.active, .result-section.active, .intro-section.active, .game-section.active, .win-section.active, .level-transition-section.active, .certificate-section.active {
      display: block;
      animation: slideIn 0.5s ease-in-out;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    input[type="text"] {
      padding: 10px;
      font-size: 1.2em;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 20px;
      width: 80%;
    }

    .terms {
      margin: 20px 0;
      font-size: 1.1em;
      text-align: left;
      color: #333;
    }

    .terms input {
      margin-right: 10px;
    }

    .terms .eye-link {
      margin-left: 10px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      text-decoration: none;
    }

    .terms .eye-link svg {
      width: 20px;
      height: 20px;
      fill: #1a2763;
      transition: fill 0.3s;
    }

    .terms .eye-link:hover svg {
      fill: #0d6efd;
    }

    .terms .eye-open {
      display: none;
    }

    button {
      padding: 10px 20px;
      font-size: 1.2em;
      background: #1a2763;
      border: none;
      border-radius: 5px;
      color: rgb(250,248,232);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }

    button:hover {
      background: #228b22;
      transform: scale(1.05);
    }

    .quiz-card {
      background: rgb(250,248,232);
      color: #333;
      padding: 20px;
      border-radius: 10px;
      margin: 20px 0;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      transition: transform 0.6s;
    }

    .quiz-card.vibrate {
      animation: vibrate 0.3s;
    }

    @keyframes vibrate {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
    }

    .option {
      display: block;
      padding: 10px;
      margin: 10px 0;
      background: #f0f0f0;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .option:hover {
      background: #d3d3d3;
    }

    .option.selected {
      background: #1e90ff;
      color: rgb(250,248,232);
    }

    .option.correct {
      background: #32cd32;
      color: rgb(250,248,232);
    }

    .option.wrong {
      background: #ff4500;
      color: rgb(250,248,232);
    }

    .feedback {
      margin-top: 10px;
      font-weight: bold;
    }

    .game-section {
      background: #e2faf3;
      padding: 2px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      max-width: 100%;
      margin: 0 auto;
    }

    .game-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .game-header h2 {
      font-size: 1.8em;
      color: #1a2763;
    }

    .timer {
      font-size: 1.5em;
      color: #1a2763;
      background: rgba(255, 255, 255, 0.8);
      padding: 5px 15px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .game-container {
      display: flex;
      gap: 20px;
      max-height: 60vh;
      overflow: hidden;
    }

    .cards-panel {
      width: 200px;
      background: rgba(255, 255, 255, 0.9);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      overflow-y: auto;
    }

    .cards {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: 10px;
      overflow-y: auto;
    }

    .card {
      width: 100%;
      height: 100px;
      background-color: rgb(250,248,232);
      border: 2px solid #ccc;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      perspective: 1000px;
      transform-style: preserve-3d;
      transition: transform 0.6s ease-in-out;
    }

    .card:hover {
      transform: scale(1.02);
    }

    .card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 8px;
      backface-visibility: hidden;
      position: absolute;
      top: 0;
      left: 0;
    }

    .card .info {
      display: none;
    }

    .card span {
      font-size: 1em;
      color: #333;
    }

    .flowchart {
      flex: 1;
      display: flex;
      align-items: center;
      position: relative;
      padding: 20px;
      overflow-x: auto;
    }

    .flowchart .row {
      display: flex;
      align-items: center;
      gap: 30px;
      position: relative;
    }

    /* Complex Flowchart Layout for Level 2 ONLY */
    .flowchart-complex {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      position: relative;
      padding: 20px;
      overflow-x: auto;
      min-height: 400px;
    }

    /* Main horizontal row with branching point */
    .flowchart-main-row {
      display: flex;
      align-items: center;
      gap: 30px;
      position: relative;
      margin-bottom: 20px;
    }

    /* Vertical branching section */
    .flowchart-branch-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 40px;
      position: relative;
    }

    .flowchart-branch-upper {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    .flowchart-branch-lower {
      display: flex;
      align-items: center;
      gap: 30px;
    }

    /* Connecting lines for main row */
    .flowchart-main-row .dropzone:not(:last-child)::after {
      content: '';
      position: absolute;
      right: -35px;
      top: 50%;
      width: 30px;
      height: 2px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='2'%3E%3Cline x1='0' y1='1' x2='30' y2='1' stroke='%231a2763' stroke-width='2' stroke-dasharray='4,4'/%3E%3C/svg%3E");
      transform: translateY(-50%);
    }

    /* Connecting lines for branch sections */
    .flowchart-branch-upper .dropzone:not(:last-child)::after,
    .flowchart-branch-lower .dropzone:not(:last-child)::after {
      content: '';
      position: absolute;
      right: -35px;
      top: 50%;
      width: 30px;
      height: 2px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='2'%3E%3Cline x1='0' y1='1' x2='30' y2='1' stroke='%231a2763' stroke-width='2' stroke-dasharray='4,4'/%3E%3C/svg%3E");
      transform: translateY(-50%);
    }

    /* Special connector for branching point */
    .branch-point::after {
      content: '';
      position: absolute;
      right: -35px;
      top: 50%;
      width: 30px;
      height: 80px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='80'%3E%3Cline x1='0' y1='40' x2='30' y2='40' stroke='%231a2763' stroke-width='2' stroke-dasharray='4,4'/%3E%3Cline x1='30' y1='20' x2='30' y2='60' stroke='%231a2763' stroke-width='2' stroke-dasharray='4,4'/%3E%3C/svg%3E");
      transform: translateY(-50%);
    }

    .dropzone {
      width: 100px;
      height: 100px;
      border: 2px dashed #1a2763;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: rgba(255, 255, 255, 0.8);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      position: relative;
      transition: border-color 0.3s;
    }

    .dropzone.filled {
      border: 2px solid #32cd32;
    }

    .dropzone img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 5px;
      margin-bottom: 5px;
    }

    .dropzone span {
      font-size: 0.9em;
      color: #333;
      text-align: center;
      padding: 0 5px;
      word-wrap: break-word;
    }

    /* Connecting lines for regular flowchart (Level 1) */
    .flowchart .row .dropzone:not(:last-child)::after {
      content: '';
      position: absolute;
      right: -35px;
      top: 50%;
      width: 30px;
      height: 2px;
      background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='30' height='2'%3E%3Cline x1='0' y1='1' x2='30' y2='1' stroke='%231a2763' stroke-width='2' stroke-dasharray='4,4'/%3E%3C/svg%3E");
      transform: translateY(-50%);
    }

    .game-feedback {
      margin-top: 10px;
      font-size: 1.2em;
      font-weight: bold;
      color: #ff4500;
      text-align: center;
      animation: fadeIn 0.5s;
    }

    .game-feedback.success {
      color: #32cd32;
    }

    .game-footer {
      margin-top: 20px;
      text-align: center;
    }

    /* Accessibility and Responsiveness */
    @media (max-width: 768px) {
      .game-container {
        flex-direction: column;
        max-height: none;
      }

      .cards-panel {
        width: 100%;
        max-height: 30vh;
        overflow-y: auto;
      }

      .flowchart, .flowchart-complex {
        width: 100%;
        overflow-x: auto;
      }

      .dropzone {
        width: 90px;
        height: 90px;
      }

      .dropzone img {
        width: 60px;
        height: 60px;
      }
    }

    .win-section {
      position: relative;
      display: none;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #f5f5f5;
    }

    .win-card {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
      animation: slideIn 1s ease-in-out;
      background-image: url('https://res.cloudinary.com/dxi76chcp/image/upload/v1749032619/Recycle_Ace_Logo_xoafgh.png');
      background-size: contain;
      background-repeat: no-repeat;
      background-position: top center;
      background-blend-mode: lighten;
      color: #1a2763;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .win-card .trophy {
      width: 100px;
      height: 100px;
      margin: 20px auto;
      background: url('https://img.icons8.com/color/96/000000/trophy.png') no-repeat center;
      background-size: contain;
    }

    .win-card h2 {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .win-card p {
      font-size: 1.2em;
      margin-bottom: 10px;
    }

    .win-card .time {
      font-size: 1.5em;
      font-weight: bold;
      color: #228b22;
    }

    .win-card button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 1em;
      background: #1e90ff;
      border: none;
      border-radius: 5px;
      color: #fff;
      cursor: pointer;
      transition: background 0.3s;
    }

    .win-card button:hover {
      background: #0d6efd;
    }

    .leaderboard {
      background: rgb(250,248,232);
      color: #333;
      padding: 20px;
      border-radius: 10px;
      margin-top: 20px;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
      animation: fadeIn 1s ease-in-out;
    }

    .leaderboard h3 {
      font-size: 1.8em;
      margin-bottom: 15px;
      color: #1e90ff;
    }

    .leaderboard table {
      width: 100%;
      border-collapse: collapse;
    }

    .leaderboard th, .leaderboard td {
      padding: 10px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    .leaderboard th {
      background: #1e90ff;
      color: rgb(250,248,232);
    }

    .leaderboard td {
      background: #f9f9f9;
    }

    .leaderboard tr:nth-child(1) td {
      background: #32cd32;
      color: rgb(250,248,232);
      font-weight: bold;
    }

    #fireworks-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
      opacity: 0;
      animation: fadeInCanvas 3s ease-in-out forwards;
    }

    @keyframes fadeInCanvas {
      to { opacity: 0.9; }
    }

    .result-section {
      position: relative;
      display: none;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .result-card {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
      animation: fadeIn 1s ease-in-out;
    }

    .result-card .logo {
      width: 50px;
      height: 50px;
      margin: 0 auto 20px;
      display: block;
    }

    .result-card h2 {
      font-size: 1.8em;
      color: #333;
      margin-bottom: 15px;
    }

    .result-card .score {
      font-size: 2.5em;
      font-weight: bold;
      color: #1e90ff;
      margin: 10px 0;
    }

    .result-card p {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 20px;
    }

    .result-card button {
      background: #1e90ff;
      padding: 10px 30px;
      font-size: 1.2em;
      border-radius: 25px;
      transition: background 0.3s, transform 0.2s;
    }

    .result-card button:hover {
      background: #0d6efd;
      transform: scale(1.05);
    }

    #fireworks-canvas, #confetti-canvas, #certificate-confetti-canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 5;
      pointer-events: none;
    }

    .intro-section {
      position: relative;
      display: none;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .intro-card {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
      animation: fadeIn 1s ease-in-out;
    }

    .intro-card .logo {
      width: 50px;
      height: 50px;
      margin: 0 auto 10px;
      display: block;
    }

    .intro-card .icon {
      width: 150px;
      height: 150px;
      margin: 0 auto 20px;
      display: block;
    }

    .intro-card h2 {
      font-size: 1.8em;
      color: #333;
      margin-bottom: 15px;
    }

    .intro-card p {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 20px;
    }

    .intro-card button {
      background: #1e90ff;
      padding: 10px 30px;
      font-size: 1.2em;
      border-radius: 25px;
      transition: background 0.3s, transform 0.2s;
    }

    .intro-card button:hover {
      background: #0d6efd;
      transform: scale(1.05);
    }

    .level-transition-section {
      position: relative;
      display: none;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    .transition-card {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
      animation: fadeIn 1s ease-in-out;
    }

    .transition-card .logo {
      width: 50px;
      height: 50px;
      margin: 0 auto 10px;
      display: block;
    }

    .transition-card .icon {
      width: 150px;
      height: 150px;
      margin: 0 auto 20px;
      display: block;
    }

    .transition-card h2 {
      font-size: 1.8em;
      color: #333;
      margin-bottom: 15px;
    }

    .transition-card p {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 20px;
    }

    .transition-card button {
      background: #1e90ff;
      padding: 10px 30px;
      font-size: 1.2em;
      border-radius: 25px;
      transition: background 0.3s, transform 0.2s;
    }

    .transition-card button:hover {
      background: #0d6efd;
      transform: scale(1.05);
    }

    .image-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .image-overlay.active {
      display: flex;
    }

    .image-overlay .flipped-card {
      width: 300px;
      height: 200px;
      position: relative;
      perspective: 1000px;
      transform-style: preserve-3d;
      transition: transform 0.8s ease-in-out;
    }

    .image-overlay .flipped-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 10px;
      backface-visibility: hidden;
      position: absolute;
      top: 0;
      left: 0;
    }

    .image-overlay .flipped-card .back {
      transform: rotateY(180deg);
    }

    .image-overlay .flipped-card.flipped {
      transform: rotateY(180deg);
    }

    .image-overlay .close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2em;
      color: rgb(250,248,232);
      cursor: pointer;
    }

    .text-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 2000;
      justify-content: center;
      align-items: center;
    }

    .text-overlay.active {
      display: flex;
    }

    .text-overlay .text-content {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      color: #333;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      animation: fadeIn 1s ease-in-out;
    }

    .text-overlay .text-content h2 {
      font-size: 1.8em;
      color: #1a2763;
      margin-bottom: 15px;
    }

    .text-overlay .text-content p, .text-overlay .text-content li {
      font-size: 1.2em;
      color: #666;
      margin-bottom: 10px;
    }

    .text-overlay .close-button {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2em;
      color: rgb(250,248,232);
      cursor: pointer;
    }

    .certificate-section {
      position: relative;
      display: none;
      width: 100%;
      height: 100%;
      overflow: hidden;
      /* background: #f5f5f5; */
    }

    .certificate-card {
      background: rgb(250,248,232);
      border-radius: 15px;
      padding: 30px;
      max-width: 600px;
      margin: 0 auto;
      text-align: center;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
      z-index: 1;
      animation: slideIn 1s ease-in-out;
      background-image: url('https://res.cloudinary.com/dxi76chcp/image/upload/v1750223456/certificate-background.png');
      background-size: cover;
      color: #1a2763;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .certificate-card h2 {
      font-size: 2.5em;
      margin-bottom: 20px;
      animation: bounceIn 1s ease-out;
    }

    .certificate-card p {
      font-size: 1.2em;
      margin-bottom: 10px;
      animation: fadeInUp 1s ease-out;
    }
    
    .certificate-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;
      z-index: 1;
    }
    
    .user-name-certificate {
      font-size: 1.8em;
      font-weight: bold;
      color: #1a2763;
      margin: 10px 0;
      animation: fadeInUp 1s ease-out;
    }

    .download-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 20px;
      font-size: 1.2em;
      background: #1a2763;
      border: none;
      border-radius: 5px;
      color: rgb(250,248,232);
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
      margin-bottom: 15px;
    }

    .download-btn:hover {
      background: #228b22;
      transform: scale(1.05);
    }

    .download-btn svg {
      width: 20px;
      height: 20px;
    }

    .certificate-card .logo {
      width: 100px;
      height: 100px;
      margin: 0 auto 20px;
      display: block;
      animation: rotateIn 1s ease-in-out;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.5); opacity: 0; }
      60% { transform: scale(1.1); opacity: 1; }
      100% { transform: scale(1); }
    }

    @keyframes fadeInUp {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    @keyframes rotateIn {
      0% { transform: rotate(-20deg); opacity: 0; }
      100% { transform: rotate(0); opacity: 1; }
    }

    #certificate-confetti-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    .certificate-text {
      font-size: 1.5em;
      color: #1a2763;
      text-align: center;
      padding: 20px;
    }

    .certificate-footer {
      position: absolute;
      bottom: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .certificate-footer img {
      width: 50px;
      height: 50px;
    }

    .certificate-footer p {
      font-size: 1.2em;
      color: #1a2763;
    }

    /* Social sharing styles */
    .social-share-container {
      margin-top: 20px;
      text-align: center;
    }
    
    .social-share-container p {
      margin-bottom: 10px;
      font-weight: bold;
      color: #1a2763;
    }
    
    .social-buttons {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-top: 10px;
    }
    
    .social-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 5px;
      padding: 8px 15px;
      border-radius: 5px;
      color: white;
      font-size: 14px;
      cursor: pointer;
      transition: transform 0.2s, background-color 0.2s;
    }
    
    .social-btn:hover {
      transform: scale(1.05);
    }
    
    .facebook {
      background-color: #1877F2;
    }
    
    .facebook:hover {
      background-color: #0e5fc0;
    }
    
    .instagram {
      background-color: #C13584;
    }
    
    .instagram:hover {
      background-color: #8f2762;
    }
    
    .twitter {
      background-color: #1DA1F2;
    }
    
    .twitter:hover {
      background-color: #0c85d0;
    }
    
    .linkedin {
      background-color: #0077B5;
    }
    
    .linkedin:hover {
      background-color: #005e93;
    }
  </style>
</head>
<body>
  <div class="splash-screen">
    <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1749032619/Recycle_Ace_Logo_xoafgh.png" alt="Recycl'ace Logo">
    <h1>Recycl'ace</h1>
    <p>Découvre le cycle de vie d'une balle avec La Fresque de la balle de tennis</p>
  </div>

  <div class="image-overlay" id="imageOverlay">
    <span class="close-button" onclick="closeOverlay()">×</span>
    <div class="flipped-card" id="flippedCard">
      <img class="front" src="" alt="Front Image">
      <img class="back" src="" alt="Back Image">
    </div>
  </div>

  <div class="text-overlay" id="termsOverlay1">
    <span class="close-button" onclick="closeTextOverlay('termsOverlay1')">×</span>
    <div class="text-content">
      <h2>Termes d'utilisation de l'application "Fresque de la Balle"</h2>
      <p>L'application "Fresque de la Balle" est un outil interactif conçu par Recycl'ace & Sports, destiné à sensibiliser aux enjeux environnementaux du sport, en particulier autour du cycle de vie des balles de tennis.</p>
      <p>En utilisant cette application, vous acceptez les présentes conditions d'utilisation.</p>
      <h3>1. Collecte et utilisation des données</h3>
      <p>L'application ne collecte aucune donnée personnelle directement identifiable (comme adresse email, numéro de téléphone, adresse IP ou localisation précise).</p>
      <p>Cependant, dans le but de permettre un suivi pédagogique et d'analyser les performances globales de sensibilisation, l'application enregistre temporairement les données suivantes :</p>
      <ul>
        <li>Nom ou identifiant renseigné volontairement par l'utilisateur (champ libre ou pseudonyme)</li>
        <li>Score obtenu à la fin de la fresque</li>
        <li>Temps nécessaire pour la compléter</li>
      </ul>
      <p>Ces données sont :</p>
      <ul>
        <li>non associées à une identité légale ;</li>
        <li>stockées de manière sécurisée ;</li>
        <li>utilisées exclusivement pour des analyses internes et l'amélioration de l'outil ;</li>
        <li>jamais transmises ou revendues à des tiers.</li>
      </ul>
      <p>Conformément au Règlement Général sur la Protection des Données (RGPD), les utilisateurs peuvent à tout moment demander la suppression de leurs données en contactant : recycace@gmail.com.</p>
      <h3>2. Fonctionnement de l'application</h3>
      <p>L'application est accessible gratuitement et sans obligation d'inscription. Elle peut être utilisée à des fins personnelles, éducatives ou de sensibilisation dans un cadre non commercial et avec l'accord de Recycl'ace & Sports.</p>
      <h3>3. Limitation de responsabilité</h3>
      <p>Recycl'ace & Sports décline toute responsabilité en cas d'interruption, de dysfonctionnement ou de mauvaise utilisation de l'application. Le contenu est fourni à titre informatif et pédagogique, sans garantie d'exactitude exhaustive.</p>
    </div>
  </div>

  <div class="text-overlay" id="termsOverlay2">
    <span class="close-button" onclick="closeTextOverlay('termsOverlay2')">×</span>
    <div class="text-content">
      <h2>Conditions d'utilisation de l'application "Fresque de la Balle"</h2>
      <p>L'ensemble des contenus de l'application "Fresque de la Balle" (textes, visuels, éléments graphiques, quizz, scénarios, interfaces, résultats, logos) est protégé au titre de la propriété intellectuelle, et appartient exclusivement à Recycl'ace & Sports.</p>
      <h3>1. Usage autorisé</h3>
      <p>L'application est conçue pour être utilisée :</p>
      <ul>
        <li>À titre individuel, pour se former ou s'informer de manière autonome ;</li>
        <li>Dans un cadre éducatif, personnel ou associatif non lucratif, à condition de respecter l'intégrité des contenus et de ne pas en tirer un usage commercial, promotionnel ou institutionnel sans autorisation préalable (sauf accord préalable de Recycl'ace & Sports).</li>
      </ul>
      <h3>2. Restrictions d'utilisation</h3>
      <p>Il est strictement interdit, sans accord écrit préalable de Recycl'ace & Sports :</p>
      <ul>
        <li>D'utiliser tout ou partie de l'application à des fins commerciales ou institutionnelles (entreprises, collectivités, écoles, événements sponsorisés, formations rémunérées, etc.) ;</li>
        <li>D'intégrer l'application ou ses contenus à des supports tiers (présentations, formations, sites web, réseaux sociaux, applications, etc.) ;</li>
        <li>De reproduire, copier, diffuser ou modifier le contenu, même partiellement ;</li>
        <li>De revendiquer un droit d'auteur ou de paternité sur tout ou partie de l'outil.</li>
      </ul>
      <h3>3. Demande d'autorisation</h3>
      <p>Pour toute utilisation au-delà du cadre personnel ou pour tout projet de collaboration, veuillez contacter recyclace@gmail.com.</p>
      <p>Le non-respect de ces conditions pourra donner lieu à des poursuites au titre de la violation des droits de propriété intellectuelle.</p>
    </div>
  </div>

  <div class="container">
    <h1>Recycl'ace - Fresque de la Balle</h1>

    <div class="welcome-section">
      <p>Bienvenue à l'atelier sur la Fresque de la Balle !</p>
      <input type="text" id="userName" placeholder="Entrez votre nom" required>
      <div class="terms">
        <label>
          <input type="checkbox" id="terms1"> J'accepte les conditions d'utilisation
          <a class="eye-link" onclick="toggleEye('eye1')">
            <svg class="eye-closed" id="eye1-closed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
            <svg class="eye-open" id="eye1-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3-3z"/>
            </svg>
          </a>
        </label><br>
        <label>
          <input type="checkbox" id="terms2"> Je reconnais avoir pris connaissance des termes d'utilisation du contenu lié à la Fresque de la Balle
          <a class="eye-link" onclick="toggleEye('eye2')">
            <svg class="eye-closed" id="eye2-closed" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
            </svg>
            <svg class="eye-open" id="eye2-open" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
              <path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3-3z"/>
            </svg>
          </a>
        </label>
      </div>
      <button onclick="startQuiz()" disabled id="startButton">Continuer</button>
    </div>

    <div class="quiz-section">
      <p>Avant de commencer, testons tes connaissances !</p>
      <div class="quiz-card" id="quizCard">
        <h2 id="question"></h2>
        <div id="options"></div>
        <div id="feedback" class="feedback"></div>
        <button onclick="checkAnswer()">Valider</button>
      </div>
    </div>

    <div class="result-section">
      <canvas id="confetti-canvas"></canvas>
      <div class="result-card">
        <h2>Bravo ! Voici ton score :</h2>
        <p class="score" id="quizScore">X/3</p>
        <p>C'est le moment d'en apprendre davantage sur le cycle de vie d'une balle !</p>
        <button onclick="startIntro()">C'est parti !</button>
      </div>
    </div>

    <div class="intro-section">
      <div class="intro-card" id="introCard1">
        <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750152851/A_quoi_sert_la_Fresque___bbos8c.png" alt="Fresque Icon" class="icon">
        <h2>À quoi sert la Fresque ?</h2>
        <p>La fresque de la Balle permet de découvrir l'ensemble du cycle de vie d'une balle, de sa création à la gestion de sa fin de vie.</p>
        <button onclick="showNextIntroCard(2)">Suivant</button>
      </div>
      <div class="intro-card" id="introCard2" style="display: none;">
        <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750152851/Quel_est_l_objectif___s1z07n.png" alt="Objectif Icon" class="icon">
        <h2>Quel est l'objectif ?</h2>
        <p>L'objectif est de placer dans l'ordre l'ensemble des étapes du cycle de vie de la balle.</p>
        <button onclick="showNextIntroCard(3)">Suivant</button>
      </div>
      <div class="intro-card" id="introCard3" style="display: none;">
        <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750152851/Comment_jouer___cdclv3.png" alt="Jouer Icon" class="icon">
        <h2>Comment jouer ?</h2>
        <p>Pour cela rien de plus simple ! Il suffit de glisser une carte depuis le bandeau de gauche vers l'emplacement choisi.</p>
        <button onclick="startGame(1)">Commencer</button>
      </div>
    </div>

    <!-- Level 1 Game Section - Simple Linear Layout -->
    <div class="game-section" id="game-level-1">
      <div class="game-header">
        <h2>Niveau 1 : Organise le cycle de vie ! Cliquez, Retournez, Faites Glisser et Déposez</h2>
        <div class="timer" id="timer-1">00:00</div>
      </div>
      <div class="game-feedback" id="feedback-1"></div>
      <div class="game-container">
        <div class="cards-panel" id="cards-1">
          <div class="card" draggable="true" data-name="Raw Materials" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750154446/Pic2.Stp1_k74932.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750154447/Pic1.Stp1_cfch0d.png" alt="Raw Materials">
            <span>Raw Materials</span>
          </div>
          <div class="card" draggable="true" data-name="Manufacturing" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196505/Pic2.Stp2_trphc5.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196505/Pic1.Stp2_gk5lhj.png" alt="Manufacturing">
            <span>Manufacturing</span>
          </div>
          <div class="card" draggable="true" data-name="Transport" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196584/Pic2.Stp3_jmgzp4.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196584/Pic1.Stp3_qgtd8h.png" alt="Transport">
            <span>Transport</span>
          </div>
          <div class="card" draggable="true" data-name="Usage" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196666/Pic2.Stp4_nivmnq.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196666/Pic1.Stp4_ngqtkc.png" alt="Usage">
            <span>Usage</span>
          </div>
          <div class="card" draggable="true" data-name="Wear" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196794/Pic2.Stp5_buwsnh.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196794/Pic1.Stp5_lkcbno.png" alt="Wear">
            <span>Wear</span>
          </div>
          <div class="card" draggable="true" data-name="Collection" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196875/Pic2.Stp6_kjyesz.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196875/Pic1.Stp6_cri3tr.png" alt="Collection">
            <span>Collection</span>
          </div>
          <div class="card" draggable="true" data-name="Recycling" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196943/Pic2.Stp7_w7xa8j.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196943/Pic1.Stp7_o2t1xr.png" alt="Recycling">
            <span>Recycling</span>
          </div>
        </div>
        <!-- Simple horizontal linear flowchart for Level 1 -->
        <div class="flowchart">
          <div class="row" id="dropzones-1">
            <div class="dropzone" data-correct="Raw Materials"></div>
            <div class="dropzone" data-correct="Manufacturing"></div>
            <div class="dropzone" data-correct="Transport"></div>
            <div class="dropzone" data-correct="Usage"></div>
            <div class="dropzone" data-correct="Wear"></div>
            <div class="dropzone" data-correct="Collection"></div>
            <div class="dropzone" data-correct="Recycling"></div>
          </div>
        </div>
      </div>
      <div class="game-footer">
        <button onclick="checkOrder(1)">Valider l'ordre</button>
      </div>
    </div>

    <div class="level-transition-section">
      <div class="transition-card">
        <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750460848/Question_mark_icon_dy5q9j.png" alt="Advanced Level Icon" class="icon">
        <h2>Félicitations ! Mais... Ce n'est pas terminé !</h2>
        <p>Recycl'ace propose une alternative pour gérer la fin de vie des balles de tennis et ainsi réduire leur impact.</p>
        <button onclick="startGame(2)" aria-label="Démarrer le niveau 2">Il est temps de découvrir comment !</button>
      </div>
    </div>

    <!-- Level 2 Game Section with Complex Layout -->
    <div class="game-section" id="game-level-2">
      <div class="game-header">
        <h2>Niveau 2 : Organise le cycle avancé ! Cliquez, Retournez, Faites Glisser et Déposez</h2>
        <div class="timer" id="timer-2">00:00</div>
      </div>
      <div class="game-feedback" id="feedback-2"></div>
      <div class="game-container">
        <div class="cards-panel" id="cards-2">

          

          <div class="card" draggable="true" data-name="Raw Materials" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750154446/Pic2.Stp1_k74932.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750154447/Pic1.Stp1_cfch0d.png" alt="Raw Materials">
            <span>Raw Materials</span>
          </div>
          <div class="card" draggable="true" data-name="Manufacturing" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196505/Pic2.Stp2_trphc5.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196505/Pic1.Stp2_gk5lhj.png" alt="Manufacturing">
            <span>Manufacturing</span>
          </div>
          <div class="card" draggable="true" data-name="Transport" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196584/Pic2.Stp3_jmgzp4.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196584/Pic1.Stp3_qgtd8h.png" alt="Transport">
            <span>Transport</span>
          </div>
          <div class="card" draggable="true" data-name="Usage" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196666/Pic2.Stp4_nivmnq.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196666/Pic1.Stp4_ngqtkc.png" alt="Usage">
            <span>Usage</span>
          </div>
          <div class="card" draggable="true" data-name="Wear" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196794/Pic2.Stp5_buwsnh.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196794/Pic1.Stp5_lkcbno.png" alt="Wear">
            <span>Wear</span>
          </div>
          <div class="card" draggable="true" data-name="Collection" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196875/Pic2.Stp6_kjyesz.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196875/Pic1.Stp6_cri3tr.png" alt="Collection">
            <span>Collection</span>
          </div>
          <div class="card" draggable="true" data-name="Recycling" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196943/Pic2.Stp7_w7xa8j.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750196943/Pic1.Stp7_o2t1xr.png" alt="Recycling">
            <span>Recycling</span>
          </div>

          
          <div class="card" draggable="true" data-name="Design" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750197130/Pic2.Stp8_ycyz0d.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750197129/Pic1.Stp8_zma5lq.png" alt="Design">
            <span>Design</span>
          </div>

          <div class="card" draggable="true" data-name="Solution" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750197347/Pic2.Stp9_weq0af.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750197347/Pic1.Stp9_r9qsex.png" alt="Solution">
            <span>Solution</span>
          </div>

          <div class="card" draggable="true" data-name="water" data-back-img="https://res.cloudinary.com/dxi76chcp/image/upload/v1750591040/Pic2.Stp10_sgdjsi.png">
            <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1750591047/Pic1.Stp10_jaavcr.png" alt="Solution">
            <span>hyderate</span>
          </div>

        </div>
        <!-- Complex flowchart matching the exact image layout -->
        <div class="flowchart-complex" id="dropzones-2">
          <!-- Main horizontal row: Design → Raw Materials → Manufacturing → Transport -->
          <div class="flowchart-main-row">
          
            <div class="dropzone" data-correct="Raw Materials"></div>
            <div class="dropzone" data-correct="Manufacturing"></div>
            <div class="dropzone branch-point" data-correct="Transport"></div>
            <div class="dropzone" data-correct="Usage"></div>
          </div>
          
          <!-- Branching section with upper and lower paths -->
          <div class="flowchart-branch-container">
            <!-- Upper branch: Usage → (connects to lower) -->
            <div class="flowchart-branch-upper">
            
              <div class="dropzone" data-correct="Wear"></div>
            </div>
            
            <!-- Lower branch: Wear -->
            <div class="flowchart-branch-lower">
             
              <div class="dropzone" data-correct="Collection"></div>
            </div>
          </div>
          
          <!-- Final horizontal row: Collection → Recycling → Solution -->
          <div class="flowchart-main-row">
           
            
            <div class="dropzone" data-correct="Recycling"></div>
            <div class="dropzone" data-correct="Design"></div>
            <div class="dropzone" data-correct="Solution"></div>
            <div class="dropzone" data-correct="water"></div>

          </div>
        </div>
      </div>
      <div class="game-footer">
        <button onclick="checkOrder(2)">Valider l'ordre</button>
      </div>
    </div>

    <div class="win-section">
      <canvas id="fireworks-canvas"></canvas>
      <div class="win-card">
        <div class="trophy"></div>
        <h2>Félicitation !</h2>
        <p>Tu as terminé la Fresque de la Balle !</p>
        <p class="time" id="winTime">Ton temps : 00:00</p>
        <button onclick="showLeaderboard()">Voir mon classement</button>
        <button onclick="showCertificate()">Voir mon certificat</button>
      </div>
      <div class="leaderboard" id="leaderboard" style="display: none;">
        <h3>Classement Général</h3>
        <table>
          <thead>
            <tr>
              <th>Rang</th>
              <th>Nom</th>
              <th>Temps Total</th>
            </tr>
          </thead>
          <tbody id="leaderboard-body">
            <!-- Leaderboard entries will be dynamically added here -->
          </tbody>
        </table>
      </div>
    </div>

    <div class="certificate-section">
      <div class="certificate-card">
        <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1749032619/Recycle_Ace_Logo_xoafgh.png" alt="Recycl'ace Logo" class="logo">
        <h2>Félicitations !</h2>
        <p>Tu as brillamment complété <b>la Fresque de la Balle</b>.
Merci pour ton engagement en faveur d'un sport plus durable et responsa</p>
        <p class="certificate-text">Tu intègres ainsi le cercle des sportifs responsables.</p>
        <p>Maintenant, la balle est dans ton camp !</p>
      </div>
      <canvas id="certificate-confetti-canvas"></canvas>
    </div>
  </div>

  <footer>
    <img src="https://res.cloudinary.com/dxi76chcp/image/upload/v1749032619/Recycle_Ace_Logo_xoafgh.png" alt="Recycl'ace Logo">
    <p>Recycl'ace</p>
  </footer>

  <script>
    // Function to download certificate
    function downloadCertificate() {
      const certificateElement = document.querySelector('.certificate-card');
      
      if (certificateElement) {
        alert('Préparation du téléchargement du certificat...');
        
        html2canvas(certificateElement).then(canvas => {
          const imageData = canvas.toDataURL('image/jpeg', 0.9);
          
          const downloadLink = document.createElement('a');
          downloadLink.href = imageData;
          downloadLink.download = 'certificat-recyclace-' + (userName || 'joueur') + '.jpg';
          
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);
        });
      }
    }

    // Social sharing functions
    function shareOnFacebook() {
      shareCertificate('facebook');
    }

    function shareOnInstagram() {
      shareCertificate('instagram');
    }

    function shareOnLinkedIn() {
      shareCertificate('linkedin');
    }

    function shareOnWhatsApp() {
      shareCertificate('whatsapp');
    }
    
    function shareCertificate(platform) {
      const certificateElement = document.querySelector('.certificate-card');
      
      if (certificateElement) {
        html2canvas(certificateElement).then(canvas => {
          const imageData = canvas.toDataURL('image/jpeg', 0.9);
          
          const shareText = `J'ai terminé la Fresque de la Balle de Recycl'ace en ${document.getElementById('winTime').textContent}!`;
          const url = window.location.href;
          
          switch(platform) {
            case 'facebook':
              alert('Pour partager sur Facebook, l\'image sera d\'abord téléchargée, puis vous pourrez la joindre à votre publication.');
              const fbLink = document.createElement('a');
              fbLink.href = imageData;
              fbLink.download = 'certificat-recyclace.jpg';
              document.body.appendChild(fbLink);
              fbLink.click();
              document.body.removeChild(fbLink);
              window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(shareText)}`, '_blank');
              break;
            case 'twitter':
              window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(url)}`, '_blank');
              break;
            case 'linkedin':
              window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
              break;
            case 'whatsapp':
              window.open(`https://wa.me/?text=${encodeURIComponent(shareText + ' ' + url)}`, '_blank');
              break;
          }
        });
      }
    }
    
    const questions = [
      {
        question: "Combien de balles de tennis/padel sont utilisées chaque année en France ?",
        options: ["10 millions", "17 millions", "25 millions"],
        correct: "17 millions"
      },
      {
        question: "Combien de temps met une balle à se dégrader dans la nature ?",
        options: ["100 ans", "400 ans", "1000 ans"],
        correct: "400 ans"
      },
      {
        question: "Quel pourcentage de balles sont recyclées en France aujourd'hui ?",
        options: ["10%", "30%", "50%"],
        correct: "10%"
      }
    ];

    let currentQuestion = 0;
    let selectedOption = null;
    let currentLevel = 1;
    let startTime = null;
    let timerInterval = null;
    let userName = '';
    let level1Time = 0;
    let level2Time = 0;
    let totalTime = 0;

    document.addEventListener('DOMContentLoaded', () => {
      const splashScreen = document.querySelector('.splash-screen');
      const container = document.querySelector('.container');
      const welcomeSection = document.querySelector('.welcome-section');

      if (splashScreen && container && welcomeSection) {
        setTimeout(() => {
          splashScreen.style.display = 'none';
          container.style.display = 'block';
          welcomeSection.classList.add('active');
          setupEventListeners();
        }, 1000);
      }
    });

    function setupEventListeners() {
      const userNameInput = document.getElementById('userName');
      const terms1 = document.getElementById('terms1');
      const terms2 = document.getElementById('terms2');
      const startButton = document.getElementById('startButton');

      if (userNameInput && terms1 && terms2 && startButton) {
        userNameInput.addEventListener('input', updateStartButton);
        terms1.addEventListener('change', updateStartButton);
        terms2.addEventListener('change', updateStartButton);
      }
    }

    function updateStartButton() {
      const userNameInput = document.getElementById('userName');
      const terms1 = document.getElementById('terms1');
      const terms2 = document.getElementById('terms2');
      const startButton = document.getElementById('startButton');

      if (userNameInput && terms1 && terms2 && startButton) {
        const userName = userNameInput.value ? userNameInput.value.trim() : '';
        startButton.disabled = !(userName && terms1.checked && terms2.checked);
      }
    }

    function toggleEye(eyeId) {
      const closedEye = document.getElementById(`${eyeId}-closed`);
      const openEye = document.getElementById(`${eyeId}-open`);
      const overlayId = eyeId === 'eye1' ? 'termsOverlay1' : 'termsOverlay2';
      const overlay = document.getElementById(overlayId);

      if (closedEye && openEye && overlay) {
        if (closedEye.style.display !== 'none') {
          closedEye.style.display = 'none';
          openEye.style.display = 'inline';
          overlay.classList.add('active');
        } else {
          closedEye.style.display = 'inline';
          openEye.style.display = 'none';
          overlay.classList.remove('active');
        }
      }
    }

    function closeTextOverlay(overlayId) {
      const overlay = document.getElementById(overlayId);
      if (overlay) {
        overlay.classList.remove('active');
        const eyeId = overlayId === 'termsOverlay1' ? 'eye1' : 'eye2';
        const closedEye = document.getElementById(`${eyeId}-closed`);
        const openEye = document.getElementById(`${eyeId}-open`);
        if (closedEye && openEye) {
          closedEye.style.display = 'inline';
          openEye.style.display = 'none';
        }
      }
    }

    function startQuiz() {
      const userNameInput = document.getElementById('userName');
      const welcomeSection = document.querySelector('.welcome-section');
      const quizSection = document.querySelector('.quiz-section');

      if (userNameInput && welcomeSection && quizSection) {
        userName = userNameInput.value ? userNameInput.value.trim() : 'Anonyme';
        welcomeSection.classList.remove('active');
        quizSection.classList.add('active');
        loadQuestion();
      }
    }

    function loadQuestion() {
      const questionElement = document.getElementById('question');
      const optionsDiv = document.getElementById('options');
      const feedback = document.getElementById('feedback');

      if (questionElement && optionsDiv && feedback) {
        const q = questions[currentQuestion];
        questionElement.textContent = `Question ${currentQuestion + 1}: ${q.question}`;
        optionsDiv.innerHTML = '';
        q.options.forEach(option => {
          const div = document.createElement('div');
          div.classList.add('option');
          div.textContent = option;
          div.onclick = () => selectOption(div, option);
          optionsDiv.appendChild(div);
        });
        feedback.textContent = '';
        selectedOption = null;
      }
    }

    function selectOption(element, option) {
      const options = document.querySelectorAll('.option');
      if (options) {
        options.forEach(opt => opt.classList.remove('selected'));
        element.classList.add('selected');
        selectedOption = option;
      }
    }

    let quizScore = 0;

    function checkAnswer() {
      const feedback = document.getElementById('feedback');
      const quizCard = document.getElementById('quizCard');
      const selectedElement = document.querySelector('.option.selected');

      if (feedback && quizCard && selectedElement) {
        if (!selectedOption) {
          alert("Veuillez sélectionner une réponse.");
          return;
        }

        const q = questions[currentQuestion];
        if (selectedOption === q.correct) {
          quizScore++;
          selectedElement.classList.add('correct');
          feedback.textContent = `Bonne réponse ! La bonne réponse est : ${q.correct}`;
          setTimeout(() => {
            currentQuestion++;
            if (currentQuestion < questions.length) {
              loadQuestion();
            } else {
              showResult();
            }
          }, 1000);
        } else {
          quizCard.classList.add('vibrate');
          selectedElement.classList.add('wrong');
          feedback.textContent = `Mauvaise réponse ! La bonne réponse est : ${q.correct}`;
          setTimeout(() => {
            quizCard.classList.remove('vibrate');
            selectedElement.classList.remove('wrong', 'selected');
            feedback.textContent = '';
            selectedOption = null;
          }, 1000);
        }
      }
    }

    function showResult() {
      const quizSection = document.querySelector('.quiz-section');
      const resultSection = document.querySelector('.result-section');
      const quizScoreElement = document.getElementById('quizScore');

      if (quizSection && resultSection && quizScoreElement) {
        quizSection.classList.remove('active');
        resultSection.classList.add('active');
        quizScoreElement.textContent = `${quizScore}/3`;
        startConfetti();
      }
    }

    function startConfetti() {
      const canvas = document.getElementById('confetti-canvas');
      if (canvas && canvas.getContext) {
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const confetti = [];
        const colors = ['#ff0', '#f00', '#0f0', '#00f', '#f0f'];

        function ConfettiParticle() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height - canvas.height;
          this.size = Math.random() * 10 + 5;
          this.speed = Math.random() * 3 + 2;
          this.angle = Math.random() * 360;
          this.color = colors[Math.floor(Math.random() * colors.length)];
          this.shape = Math.random() > 0.5 ? 'rect' : 'circle';
        }

        ConfettiParticle.prototype.update = function() {
          this.y += this.speed;
          this.x += Math.sin(this.angle) * 2;
          this.angle += 0.1;
          if (this.y > canvas.height) {
            this.y = -this.size;
            this.x = Math.random() * canvas.width;
          }
        };

        ConfettiParticle.prototype.draw = function() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          if (this.shape === 'rect') {
            ctx.rect(this.x, this.y, this.size, this.size / 2);
          } else {
            ctx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2);
          }
          ctx.fill();
        };

        for (let i = 0; i < 100; i++) {
          confetti.push(new ConfettiParticle());
        }

        function animateConfetti() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          confetti.forEach(particle => {
            particle.update();
            particle.draw();
          });
          requestAnimationFrame(animateConfetti);
        }

        animateConfetti();
      }
    }

    function startIntro() {
      const resultSection = document.querySelector('.result-section');
      const introSection = document.querySelector('.intro-section');

      if (resultSection && introSection) {
        resultSection.classList.remove('active');
        introSection.classList.add('active');
        const introCard1 = document.getElementById('introCard1');
        if (introCard1) {
          introCard1.style.display = 'block';
        }
      }
    }

    function showNextIntroCard(cardNumber) {
      const prevCard = document.getElementById(`introCard${cardNumber - 1}`);
      const nextCard = document.getElementById(`introCard${cardNumber}`);

      if (prevCard && nextCard) {
        prevCard.style.display = 'none';
        nextCard.style.display = 'block';
      }
    }

    function startGame(level) {
      const container = document.querySelector('.container');
      const introSection = document.querySelector('.intro-section');
      const levelTransitionSection = document.querySelector('.level-transition-section');
      const gameSection = document.querySelector(`#game-level-${level}`);

      // Expand container for Level 2
      if (level === 2 && container) {
        container.classList.add('level-2-active');
      }

      if ((introSection || levelTransitionSection) && gameSection) {
        if (introSection) introSection.classList.remove('active');
        if (levelTransitionSection) levelTransitionSection.classList.remove('active');
        gameSection.classList.add('active');
        currentLevel = level;
        startTime = Date.now();
        timerInterval = setInterval(() => updateTimer(level), 1000);
        initializeGame(level);
      }
    }

    function updateTimer(level) {
      const timer = document.querySelector(`#timer-${level}`);
      if (timer) {
        const elapsed = Math.floor((Date.now() - startTime) / 1000);
        const minutes = String(Math.floor(elapsed / 60)).padStart(2, '0');
        const seconds = String(elapsed % 60).padStart(2, '0');
        timer.textContent = `${minutes}:${seconds}`;
        if (level === 1) level1Time = elapsed;
        else if (level === 2) level2Time = elapsed;
      }
    }

    function showOverlay(frontImg, backImg) {
      const overlay = document.getElementById('imageOverlay');
      const flippedCard = document.getElementById('flippedCard');
      const front = flippedCard.querySelector('.front');
      const back = flippedCard.querySelector('.back');

      if (overlay && flippedCard && front && back) {
        front.src = frontImg || '';
        back.src = backImg || '';
        flippedCard.classList.remove('flipped');
        overlay.classList.add('active');

        setTimeout(() => {
          flippedCard.classList.add('flipped');
        }, 300);
      }
    }

    function closeOverlay() {
      const overlay = document.getElementById('imageOverlay');
      if (overlay) {
        overlay.classList.remove('active');
      }
    }

    function initializeGame(level) {
      const cards = document.querySelectorAll(`#cards-${level} .card`);
      const dropzones = document.querySelectorAll(`#dropzones-${level} .dropzone`);

      if (!cards || !dropzones) {
        console.error(`Cards or dropzones not found for level ${level}`);
        return;
      }

      cards.forEach(card => {
        card.addEventListener('dragstart', (e) => {
          const name = card.dataset.name || '';
          e.dataTransfer.setData('text/plain', name);
        });

        const img = card.querySelector('img');
        if (img) {
          img.addEventListener('click', () => {
            const frontImg = img.src || '';
            const backImg = card.dataset.backImg || '';
            showOverlay(frontImg, backImg);
          });
        }
      });

      dropzones.forEach(dropzone => {
        dropzone.addEventListener('dragover', (e) => {
          e.preventDefault();
        });

        dropzone.addEventListener('drop', (e) => {
          e.preventDefault();
          const name = e.dataTransfer.getData('text/plain') || '';
          if (!name) {
            console.warn('No data transferred during drop event');
            return;
          }
          const card = Array.from(cards).find(c => c.dataset.name === name);
          if (card && !dropzone.classList.contains('filled')) {
            const newCard = document.createElement('div');
            newCard.className = 'card';
            newCard.dataset.name = name;
            newCard.dataset.backImg = card.dataset.backImg || '';
            newCard.innerHTML = `<img src="${card.querySelector('img')?.src || ''}" alt="${name}">`;
            dropzone.innerHTML = '';
            dropzone.appendChild(newCard);
            dropzone.classList.add('filled');

            const newImg = newCard.querySelector('img');
            if (newImg) {
              newImg.addEventListener('click', () => {
                const frontImg = newImg.src || '';
                const backImg = newCard.dataset.backImg || '';
                showOverlay(frontImg, backImg);
              });
            }
          }
        });
      });
    }

    function checkOrder(level) {
      const dropzones = document.querySelectorAll(`#dropzones-${level} .dropzone`);
      const feedback = document.querySelector(`#feedback-${level}`);
      const cardsContainer = document.querySelector(`#cards-${level}`);

      if (!dropzones || !feedback || !cardsContainer) {
        console.error(`Required elements not found for level ${level}`);
        return;
      }

      const isCorrect = Array.from(dropzones).every(zone => {
        const card = zone.querySelector('.card');
        return card ? zone.dataset.correct === card.dataset.name : false;
      });

      if (isCorrect) {
        clearInterval(timerInterval);
        feedback.textContent = `Félicitations ! Niveau ${level} réussi !`;
        feedback.classList.add('success');
        setTimeout(() => {
          const gameSection = document.querySelector(`#game-level-${level}`);
          if (gameSection) {
            gameSection.classList.remove('active');
            if (level === 1) {
              const levelTransitionSection = document.querySelector('.level-transition-section');
              if (levelTransitionSection) {
                levelTransitionSection.classList.add('active');
              }
            } else if (level === 2) {
              const winSection = document.querySelector('.win-section');
              if (winSection) {
                winSection.classList.add('active');
                totalTime = level1Time + level2Time;
                const minutes = String(Math.floor(totalTime / 60)).padStart(2, '0');
                const seconds = String(totalTime % 60).padStart(2, '0');
                document.getElementById('winTime').textContent = `Ton temps : ${minutes}:${seconds}`;
                startFireworks();
              }
            }
          }
        }, 1500);
      } else {
        feedback.textContent = 'Mauvais ordre ! Essayez encore.';
        cardsContainer.classList.add('vibrate');
        setTimeout(() => {
          cardsContainer.classList.remove('vibrate');
          dropzones.forEach(zone => {
            zone.innerHTML = '';
            zone.classList.remove('filled');
          });
          feedback.textContent = '';
        }, 1000);
      }
    }

    function showLeaderboard() {
      const leaderboard = document.getElementById('leaderboard');
      const leaderboardBody = document.getElementById('leaderboard-body');
      if (leaderboard && leaderboardBody) {
        leaderboard.style.display = 'block';
        totalTime = level1Time + level2Time;
        const minutes = String(Math.floor(totalTime / 60)).padStart(2, '0');
        const seconds = String(totalTime % 60).padStart(2, '0');
        const userTime = `${minutes}:${seconds}`;

        leaderboardBody.innerHTML = `
          <tr>
            <td>1</td>
            <td>${userName || 'Anonyme'}</td>
            <td>${userTime}</td>
          </tr>
          <tr>
            <td>2</td>
            <td>Marie</td>
            <td>35:35</td>
          </tr>
          <tr>
            <td>3</td>
            <td>Luc</td>
            <td>40:34</td>
          </tr>
          <tr>
            <td>4</td>
            <td>Sophie</td>
            <td>41:34</td>
          </tr>
          <tr>
            <td>5</td>
            <td>Jean</td>
            <td>42:00</td>
          </tr>
        `;
      }
    }

    function startFireworks() {
      const canvas = document.getElementById('fireworks-canvas');
      if (canvas && canvas.getContext) {
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const fireworks = [];
        const particles = [];

        function Firework() {
          this.x = Math.random() * canvas.width;
          this.y = canvas.height;
          this.targetY = Math.random() * canvas.height * 0.5;
          this.vy = -(Math.random() * 5 + 5);
          this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
          this.particles = [];
          this.exploded = false;

          this.update = function() {
            if (!this.exploded) {
              this.y += this.vy;
              this.vy += 0.05;
              if (this.y <= this.targetY) {
                this.explode();
              }
            }
          };

          this.draw = function() {
            if (!this.exploded) {
              ctx.beginPath();
              ctx.arc(this.x, this.y, 3, 0, Math.PI * 2);
              ctx.fillStyle = this.color;
              ctx.fill();
            }
          };

          this.explode = function() {
            this.exploded = true;
            for (let i = 0; i < 30; i++) {
              particles.push(new Particle(this.x, this.y, this.color));
            }
          };
        }

        function Particle(x, y, color) {
          this.x = x;
          this.y = y;
          this.vx = (Math.random() - 0.5) * 8;
          this.vy = (Math.random() - 0.5) * 8;
          this.alpha = 1;
          this.color = color;

          this.update = function() {
            this.x += this.vx;
            this.y += this.vy;
            this.vy += 0.05;
            this.alpha -= 0.01;
          };

          this.draw = function() {
            ctx.beginPath();
            ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
            ctx.fillStyle = this.color;
            ctx.globalAlpha = this.alpha;
            ctx.fill();
            ctx.globalAlpha = 1;
          };
        }

        function animate() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          if (Math.random() < 0.05) {
            fireworks.push(new Firework());
          }
          fireworks.forEach((firework, index) => {
            firework.update();
            firework.draw();
            if (firework.exploded && firework.particles.length === 0) {
              fireworks.splice(index, 1);
            }
          });
          particles.forEach((particle, index) => {
            particle.update();
            particle.draw();
            if (particle.alpha <= 0) {
              particles.splice(index, 1);
            }
          });
          requestAnimationFrame(animate);
        }

        animate();
      }
    }

    function showCertificate() {
      const winSection = document.querySelector('.win-section');
      const certificateSection = document.querySelector('.certificate-section');

      if (winSection && certificateSection) {
        winSection.classList.remove('active');
        certificateSection.classList.add('active');
        
        const certificateCard = document.querySelector('.certificate-card');
        if (certificateCard) {
          let userNameElement = certificateCard.querySelector('.user-name-certificate');
          if (!userNameElement) {
            userNameElement = document.createElement('p');
            userNameElement.className = 'user-name-certificate';
            const firstP = certificateCard.querySelector('p');
            if (firstP) {
              firstP.insertAdjacentElement('afterend', userNameElement);
            } else {
              certificateCard.appendChild(userNameElement);
            }
          }
          userNameElement.textContent = userName || 'Joueur';
          
          if (!certificateCard.querySelector('.download-btn')) {
            const downloadBtn = document.createElement('button');
            downloadBtn.className = 'download-btn';
            downloadBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></svg> Télécharger mon certificat';
            downloadBtn.onclick = downloadCertificate;
            certificateCard.appendChild(downloadBtn);
          }
          
          if (!certificateCard.querySelector('.social-share-container')) {
            const socialShareContainer = document.createElement('div');
            socialShareContainer.className = 'social-share-container';
            socialShareContainer.innerHTML = `
              <p>Partagez votre certificat :</p>
              <div class="social-buttons">
                <button class="social-btn facebook" onclick="shareOnFacebook()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 2.04c-5.5 0-10 4.49-10 10.02c0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89c1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02z"/></svg>
                  Facebook
                </button>
                <button class="social-btn instagram" onclick="shareOnInstagram()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8A1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5a5 5 0 0 1-5 5a5 5 0 0 1-5-5a5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3a3 3 0 0 0 3 3a3 3 0 0 0 3-3a3 3 0 0 0-3-3Z"/></svg>
                  Instagram
                </button>
                <button class="social-btn linkedin" onclick="shareOnLinkedIn()">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/></svg>
                  LinkedIn
                </button>
              </div>
            `;
            certificateCard.appendChild(socialShareContainer);
          }
        }
        startCertificateConfetti();
      }
    }

    function startCertificateConfetti() {
      const canvas = document.getElementById('certificate-confetti-canvas');
      if (canvas && canvas.getContext) {
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const confetti = [];
        const colors = ['#ff0', '#f00', '#0f0', '#00f', '#f0f'];

        function ConfettiParticle() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height - canvas.height;
          this.size = Math.random() * 10 + 5;
          this.speed = Math.random() * 3 + 2;
          this.angle = Math.random() * 360;
          this.color = colors[Math.floor(Math.random() * colors.length)];
          this.shape = Math.random() > 0.5 ? 'rect' : 'circle';
        }

        ConfettiParticle.prototype.update = function() {
          this.y += this.speed;
          this.x += Math.sin(this.angle) * 2;
          this.angle += 0.1;
          if (this.y > canvas.height) {
            this.y = -this.size;
            this.x = Math.random() * canvas.width;
          }
        };

        ConfettiParticle.prototype.draw = function() {
          ctx.fillStyle = this.color;
          ctx.beginPath();
          if (this.shape === 'rect') {
            ctx.rect(this.x, this.y, this.size, this.size / 2);
          } else {
            ctx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2);
          }
          ctx.fill();
        };

        for (let i = 0; i < 100; i++) {
          confetti.push(new ConfettiParticle());
        }

        function animateConfetti() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          confetti.forEach(particle => {
            particle.update();
            particle.draw();
          });
          requestAnimationFrame(animateConfetti);
        }

        animateConfetti();
      }
    }
  </script>
</body>
</html>